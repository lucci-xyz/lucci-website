export const metadata = { 
  title: 'BountyPay â€” Lucci Labs',
  description: 'Automated bounty payouts for GitHub issues'
}

# BountyPay

Automated bounty payouts for open-source contributions. Fund with USDC on Base and let BountyPay handle payments when issues are resolved.

**Status:** Alpha  
**Chain:** Base  
**Token:** USDC

## Overview

BountyPay is a GitHub App that creates on-chain bounties for GitHub issues. When a contributor resolves an issue, they automatically receive payment in USDC.

### Key Features

- Automated payments when PRs are merged
- On-chain escrow for trust and security
- GitHub integration for seamless workflow
- Multi-repository support

## Getting Started

### 1. Install the GitHub App

Install [BountyPay](https://github.com/apps/bountypay) on your repository.

### 2. Fund Your Account

```typescript
import { useBountyPay } from '@lucci/bountypay-sdk'

const { depositFunds } = useBountyPay()

await depositFunds({
  amount: '1000.00',
  chain: 'base'
})
```

### 3. Create a Bounty

```bash
# Using CLI
bountypay create --repo owner/repo --issue 123 --amount 100

# Or add label on GitHub: bounty:$100
```

## API Reference

### Create Bounty

```typescript
import { BountyPayClient } from '@lucci/bountypay-sdk'

const client = new BountyPayClient({
  apiKey: process.env.BOUNTYPAY_API_KEY,
  network: 'base'
})

const bounty = await client.createBounty({
  repository: 'owner/repo',
  issueNumber: 123,
  amount: 100,
  description: 'Fix the bug'
})
```

### Webhooks

Subscribe to bounty events:

```typescript
app.post('/webhooks/bountypay', async (req, res) => {
  const event = req.body
  
  switch (event.type) {
    case 'bounty.created':
      console.log('New bounty:', event.bounty)
      break
    case 'bounty.paid':
      console.log('Payment sent:', event.transaction)
      break
  }
  
  res.json({ received: true })
})
```

## Smart Contract

The BountyEscrow contract on Base:

```solidity
interface IBountyEscrow {
    function createBounty(
        address _payee,
        uint256 _amount,
        string memory _issueUrl
    ) external payable returns (uint256);
    
    function releaseBounty(uint256 _bountyId) external;
}
```

**Contract Address**

- Base Mainnet: Coming soon
- Base Sepolia: `0x...`

## Configuration

### Environment Variables

```bash
BOUNTYPAY_API_KEY=your_api_key
BOUNTYPAY_NETWORK=base
BOUNTYPAY_WEBHOOK_URL=https://your-app.com/webhooks
```

### GitHub Permissions

BountyPay requires:
- Issues: Read & write
- Pull requests: Read
- Metadata: Read

## Troubleshooting

### Payment Not Releasing

Verify:
- PR author matches bounty claimer
- PR was merged (not just closed)
- Contributor wallet is configured
- Check transaction on Base explorer

### Bounty Creation Failed

Check:
- BountyPay app has correct permissions
- Sufficient USDC balance
- Issue exists and is open
- Network connection to Base

## Links

- [GitHub App](https://github.com/apps/bountypay)
- [Source Code](https://github.com/lucci-xyz/bounty)
- [Dashboard](https://bountypay.xyz)
